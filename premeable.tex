\usepackage{amsthm,amssymb,amsmath}
\usepackage[top=40mm, bottom=40mm, left=25mm, right=35mm]{geometry}
\usepackage{graphicx}
\usepackage{framed} 
\usepackage{lastpage}
\usepackage[numbers,square,sort&compress]{natbib}
\usepackage[version=4]{mhchem}
% \usepackage{imakeidx}
\usepackage[xindy]{imakeidx}
\usepackage{pdfpages}
%%% for two dots in pictures name
\usepackage[multidot]{grffile}
%%% for two tablas
\usepackage{booktabs}
% \usepackage[pagebackref=false,colorlinks=false,linkcolor=black,citecolor=blue]{hyperref}
\usepackage[pagebackref=false]{hyperref}
\hypersetup{
  colorlinks   = true, %Colours links instead of ugly boxes
  urlcolor     = black, %Colour for external hyperlinks
  linkcolor    = black, %Colour of internal links
  citecolor   = black %Colour of citations
}
% \usepackage[xindy,acronym, nonumberlist]{glossaries}
\usepackage[xindy,acronym,nonumberlist=true,toc]{glossaries}
% \usepackage[xindy,,acronym,nonumberlist]{glossaries-extra}

\usepackage{fancyhdr}
\usepackage{setspace}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{subfigure}
% \usepackage{graphicx}
\usepackage{caption}
\usepackage[subfigure]{tocloft}
\usepackage[nottoc]{tocbibind}
\usepackage{chemformula}
\usepackage{zref-perpage}

% % \usepackage{makeidx}
% % \usepackage[xindy]{imakeidx}
% \makeindex[columns=2,options={-s main.ist}] %load layout
% \makeindex
\newglossary[plg]{persian}{pym}{pbl}{واژه نامه}
\newglossary[elg]{english}{eym}{ebl}{واژه نامه انگلیسی }
\newglossary[ilg]{index}{iym}{ibl}{اعلام}

% \newglossary{persian}{gls}{glo}{واژه‌نامه‌ی فارسی}
% \newglossary[persian]{persian}{ldx}{ldn}{واژه‌نامه‌ی فارسی}
% \newglossary{english}{gls}{glo}{\lr{Glossary}}
% \newglossary{main}{bls}{glo}{Glossary}
% \newglossary[edx]{english}{idx}{ind}{English Glossary}
\makeglossaries
\loadglsentries{./pages/Persianglossaries.tex} % Import the glossary entries
\loadglsentries{./pages/englishglossary.tex} % Import the glossary entries

% Acronyms
\loadglsentries{./pages/acronyms2.tex} % Import the glossary entries

% Indexes
\loadglsentries{./pages/indexes.tex} % Import the glossary entries



%% تعریف استایل برای واژه نامه فارسی به انگلیسی،
\newglossarystyle{myFaToEn}{%
    \renewenvironment{theglossary}{}{}
    \renewcommand*{\glsgroupskip}{\vskip 10mm}
    \renewcommand*{\glsgroupheading}[1]{\subsection*{\glsgetgrouptitle{##1}}}
    \renewcommand*{\glossentry}[2]{\noindent\glsentryname{##1}\dotfill\space \glsentrytext{##1}
    }
}

%% تعریف استایل برای واژه نامه انگلیسی به فارسی،
\newglossarystyle{myEntoFa}{%
    \renewenvironment{theglossary}{}{}
    \renewcommand*{\glsgroupskip}{\vskip 10mm}
    \renewcommand*{\glsgroupheading}[1]{\begin{LTR} \subsection*{\glsgetgrouptitle{##1}} \end{LTR}}
    \renewcommand*{\glossentry}[2]{\noindent\glsentrytext{##1}\dotfill\space \glsentryname{##1}
  
    }
}
%%% تعیین استایل برای فهرست اختصارات
\newglossarystyle{myAbbrlist}{%
    \renewenvironment{theglossary}{}{}
    \renewcommand*{\glsgroupskip}{\vskip 10mm}
    \renewcommand*{\glsgroupheading}[1]{\begin{LTR} \subsection*{\glsgetgrouptitle{##1}} \end{LTR}}
    \renewcommand*{\glossentry}[2]{\noindent\Glsentrylong{##1}\dotfill\space \glsentrytext{##1}
  
    }
    \renewcommand*{\acronymname}{فهرست اختصارات}
}

\newglossarystyle{myIndex}{%
    \renewenvironment{theglossary}{}{}
    \renewcommand*{\glsgroupskip}{\vskip 10mm}
    \renewcommand*{\glsgroupheading}[1]{\begin{LTR} \subsection*{\glsgetgrouptitle{##1}} \end{LTR}}
    \renewcommand*{\glossentry}[2]{\noindent\glsentrytext{##1}\dotfill\space \glsentryname{##1}
  
    }
}
%%% بر طبق این دستور، در اولین باری که واژه مورد نظر از واژه‌نامه وارد شود، پاورقی زده می‌شود. 
\defglsentryfmt[english]{\glsgenentryfmt\ifglsused{\glslabel}{}{\LTRfootnote{\Glsentryname{\glslabel}}}}

%%% بر طبق این دستور، در اولین باری که واژه مورد نظر از واژه‌نامه وارد شود، پاورقی زده می‌شود. 
\defglsentryfmt[index]{\glsgenentryfmt\ifglsused{\glslabel}{}{\LTRfootnote{\Glsentryname{\glslabel}}}}

%%% بر طبق این دستور، در اولین باری که واژه مورد نظر از فهرست اختصارات وارد شود، پاورقی زده می‌شود. 
\defglsentryfmt[acronym]{\glsentryname{\glslabel}\ifglsused{\glslabel}{}{\LTRfootnote{\Glsentrylong{\glslabel}}}}


% \makeindex[columns=2,options={-s indexstyle.ist}] %load layout

\makeindex[options=-L persian -C utf8, intoc=true,title={\Huge\textbf{فهرست الفبایی}}]
%%%%%%%%%%%%%%%%%%%%%%%%%%
% فراخوانی بسته زی‌پرشین و تعریف قلم فارسی و انگلیسی
\usepackage{xepersian}
\settextfont{XB Niloofar}
\zmakeperpage{footnote}
% \settextfont{B Nazanin}
% \setmainfont[Ligatures=TeX, Path=./fonts/, Scale=1.2]{XB Niloofar.ttf}
% \settextfont[Scale=1.2, Path=fonts/, BoldFont=B Nazanin Bold.ttf]{B Nazanin.ttf}
\setlatintextfont[Scale=1., Path=fonts/, BoldFont=timesbd.ttf]{times.ttf}

%%%%%%%%%%%%%%%%%%%%%%%%%%
% چنانچه می‌خواهید اعداد در فرمول‌ها، انگلیسی باشد، خط زیر را غیرفعال کنید
\setdigitfont[Scale=0.9, Path=fonts/]{XB Zar.ttf}%{Persian Modern}
%%%%%%%%%%%%%%%%%%%%%%%%%%
% تعریف قلم‌های فارسی و انگلیسی اضافی برای استفاده در بعضی از قسمت‌های متن
\defpersianfont\titlefont[Scale=0.9, Path=fonts/]{XB Titre.ttf}
% \defpersianfont\iranic[Scale=1.1]{XB Zar Oblique}%Italic}%
% \defpersianfont\nastaliq[Scale=1.2]{IranNastaliq}

%%%%%%%%%%%%%%%%%%%%%%%%%%
% دستوری برای حذف کلمه «چکیده»
% \renewcommand{\abstractname}{}
% دستوری برای حذف کلمه «abstract»
%\renewcommand{\latinabstract}{}
% دستوری برای تغییر نام کلمه «اثبات» به «برهان»
\renewcommand\proofname{\textbf{برهان}}
% دستوری برای تغییر نام کلمه «کتاب‌نامه» به «مراجع»
\renewcommand{\bibname}{مراجع}
% دستوری برای تعریف واژه‌نامه انگلیسی به فارسی
\newcommand\persiangloss[2]{#1\dotfill\lr{#2}\\}
% دستوری برای تعریف واژه‌نامه فارسی به انگلیسی 
\newcommand\englishgloss[2]{#2\dotfill\lr{#1}\\}
% تعریف دستور جدید «\پ» برای خلاصه‌نویسی جهت نوشتن عبارت «پروژه/پایان‌نامه/رساله»
\newcommand{\پ}{پروژه/پایان‌نامه/رساله }

%\newcommand\BackSlash{\char`\\}

%%%%%%%%%%%%%%%%%%%%%%%%%%
\SepMark{-}

% تعریف و نحوه ظاهر شدن عنوان قضیه‌ها، تعریف‌ها، مثال‌ها و ...
\theoremstyle{definition}
\newtheorem{definition}{تعریف}[section]
%\theoremstyle{theorem}
\newtheorem{theorem}[definition]{قضیه}
\newtheorem{lemma}[definition]{لم}
\newtheorem{proposition}[definition]{گزاره}
\newtheorem{corollary}[definition]{نتیجه}
\newtheorem{remark}[definition]{ملاحظه}
\theoremstyle{definition}
\newtheorem{example}[definition]{مثال}

%\renewcommand{\theequation}{\thechapter-\arabic{equation}}
%\def\bibname{مراجع}
\numberwithin{algorithm}{chapter}
\def\listalgorithmname{فهرست الگوریتم‌ها}
\def\listfigurename{فهرست تصاویر}
\def\listtablename{فهرست جداول}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% دستورهایی برای سفارشی کردن سربرگ صفحات
% \newcommand{\SetHeader}{
% \csname@twosidetrue\endcsname
% \pagestyle{fancy}
% \fancyhf{} 
% \fancyhead[OL,EL]{\thepage}
% \fancyhead[OR]{\small\rightmark}
% \fancyhead[ER]{\small\leftmark}
% \renewcommand{\chaptermark}[1]{%
% \markboth{\thechapter-\ #1}{}}
% }
%%%%%%%%%%%%5
%\def\MATtextbaseline{1.5}
%\renewcommand{\baselinestretch}{\MATtextbaseline}
\doublespacing
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% دستوراتی برای اضافه کردن کلمه «فصل» در فهرست مطالب

\newlength\mylenprt
\newlength\mylenchp
\newlength\mylenapp

\renewcommand\cftpartpresnum{\partname~}
\renewcommand\cftchappresnum{\chaptername~}
\renewcommand\cftchapaftersnum{:}

\settowidth\mylenprt{\cftpartfont\cftpartpresnum\cftpartaftersnum}
\settowidth\mylenchp{\cftchapfont\cftchappresnum\cftchapaftersnum}
\settowidth\mylenapp{\cftchapfont\appendixname~\cftchapaftersnum}
\addtolength\mylenprt{\cftpartnumwidth}
\addtolength\mylenchp{\cftchapnumwidth}
\addtolength\mylenapp{\cftchapnumwidth}

\setlength\cftpartnumwidth{\mylenprt}
\setlength\cftchapnumwidth{\mylenchp}	

\makeatletter
{\def\thebibliography#1{\chapter*{\refname\@mkboth
   {\uppercase{\refname}}{\uppercase{\refname}}}\list
   {[\arabic{enumi}]}{\settowidth\labelwidth{[#1]}
   \rightmargin\labelwidth
   \advance\rightmargin\labelsep
   \advance\rightmargin\bibindent
   \itemindent -\bibindent
   \listparindent \itemindent
   \parsep \z@
   \usecounter{enumi}}
   \def\newblock{}
   \sloppy
   \sfcode`\.=1000\relax}}
\makeatother

\usepackage{grfext}
\graphicspath{{figures/}}
\usepackage{caption}